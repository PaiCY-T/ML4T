---
epic: ML4T-Alpha
task_number: 3
title: Enhanced Technical Factors
description: Develop advanced momentum factors with volume adjustment and volatility scaling for improved signal quality
status: pending
created: 2025-09-22T08:00:00Z
updated: 2025-09-22T08:00:00Z
assignee: null
depends_on: []
parallel: true
layer: 1
size: M
estimated_hours: 35
---

# Task 3: Enhanced Technical Factors

## Overview

Enhance existing momentum factors with advanced technical indicators specifically calibrated for Taiwan market characteristics, including volume-adjusted momentum, volatility-scaled signals, and Taiwan-specific market microstructure patterns.

## Objectives

- **Primary**: Improve factor Information Coefficient (IC) by 15-25% vs baseline momentum factors
- **Secondary**: Add volume confirmation and volatility adjustment to existing signals
- **Tertiary**: Create Taiwan market-specific factor adjustments for tech sector concentration

## Technical Requirements

### Enhanced Factor Specifications

**Volume-Adjusted Momentum**
```python
# Traditional momentum enhanced with volume confirmation
def volume_adjusted_momentum(prices, volumes, window=20):
    """
    Momentum signal strength adjusted by volume patterns
    Higher volume during price moves indicates stronger signal
    """
    price_momentum = prices.pct_change(window)
    volume_sma = volumes.rolling(window).mean()
    volume_ratio = volumes / volume_sma

    # Weight momentum by volume confirmation
    volume_momentum = price_momentum * np.log(volume_ratio.clip(0.1, 5.0))
    return volume_momentum
```

**Volatility-Adjusted Momentum**
```python
# Risk-adjusted momentum signals
def volatility_adjusted_momentum(prices, window=20):
    """
    Scale momentum signals by their volatility for risk-adjusted comparison
    """
    price_momentum = prices.pct_change(window)
    volatility = prices.pct_change().rolling(window).std()

    # Risk-adjusted momentum (Sharpe-like ratio)
    vol_adj_momentum = price_momentum / (volatility + 0.01)  # Avoid division by zero
    return vol_adj_momentum
```

**Multi-Timeframe Momentum**
```python
# Combine short, medium, long-term momentum
def multi_timeframe_momentum(prices):
    """
    Weighted combination of momentum signals across timeframes
    """
    mom_5d = prices.pct_change(5)    # Short-term
    mom_20d = prices.pct_change(20)  # Medium-term
    mom_60d = prices.pct_change(60)  # Long-term

    # Taiwan market optimized weights (favor medium-term)
    combined_momentum = (
        mom_5d * 0.2 +    # 20% short-term
        mom_20d * 0.5 +   # 50% medium-term
        mom_60d * 0.3     # 30% long-term
    )
    return combined_momentum
```

### Taiwan Market Specific Enhancements

**Technology Sector Momentum**
```python
# Adjust momentum for Taiwan's tech sector concentration
def tech_sector_adjusted_momentum(stock_momentum, sector_momentum, is_tech_stock):
    """
    Adjust individual stock momentum for sector-wide moves
    Reduces noise from sector rotation vs stock-specific alpha
    """
    if is_tech_stock:
        # For tech stocks, subtract sector momentum to get stock-specific alpha
        adjusted_momentum = stock_momentum - (sector_momentum * 0.7)
    else:
        # For non-tech stocks, add slight boost when tech sector weak
        adjusted_momentum = stock_momentum + (sector_momentum * -0.2)

    return adjusted_momentum
```

**Daily Limit Integration**
```python
# Account for Taiwan's ±10% daily price limits
def limit_adjusted_momentum(prices, returns, limit=0.10):
    """
    Adjust momentum calculations when stocks hit daily limits
    Limit moves may not reflect true momentum due to constraints
    """
    hit_upper_limit = (returns >= limit * 0.95)  # Close to +10% limit
    hit_lower_limit = (returns <= -limit * 0.95)  # Close to -10% limit

    # Reduce weight of limit days in momentum calculation
    limit_weights = np.where(hit_upper_limit | hit_lower_limit, 0.5, 1.0)

    # Weighted momentum calculation
    weighted_returns = returns * limit_weights
    momentum = weighted_returns.rolling(20).sum() / limit_weights.rolling(20).sum()

    return momentum
```

### Advanced Technical Indicators

**Enhanced RSI with Volume**
```python
def volume_weighted_rsi(prices, volumes, window=14):
    """
    RSI calculation weighted by volume for more reliable signals
    """
    delta = prices.diff()
    volume_weights = volumes / volumes.rolling(window*2).mean()

    # Volume-weighted gains and losses
    gains = (delta * volume_weights).where(delta > 0, 0)
    losses = (-delta * volume_weights).where(delta < 0, 0)

    avg_gain = gains.rolling(window).mean()
    avg_loss = losses.rolling(window).mean()

    rs = avg_gain / avg_loss
    vw_rsi = 100 - (100 / (1 + rs))

    return vw_rsi
```

**Momentum Acceleration**
```python
def momentum_acceleration(prices, fast_window=10, slow_window=30):
    """
    Rate of change of momentum - acceleration signal
    """
    fast_momentum = prices.pct_change(fast_window)
    slow_momentum = prices.pct_change(slow_window)

    # Momentum acceleration
    acceleration = fast_momentum - slow_momentum

    # Smooth acceleration signal
    smooth_acceleration = acceleration.rolling(5).mean()

    return smooth_acceleration
```

**Breakout Strength Indicator**
```python
def breakout_strength(prices, volumes, window=20):
    """
    Measure strength of breakouts from trading ranges
    """
    price_sma = prices.rolling(window).mean()
    price_std = prices.rolling(window).std()

    # Bollinger Band-like breakout detection
    upper_band = price_sma + (price_std * 2)
    lower_band = price_sma - (price_std * 2)

    # Breakout strength with volume confirmation
    breakout_above = (prices > upper_band) & (volumes > volumes.rolling(window).mean())
    breakout_below = (prices < lower_band) & (volumes > volumes.rolling(window).mean())

    breakout_strength = np.where(breakout_above, 1.0,
                        np.where(breakout_below, -1.0, 0.0))

    return breakout_strength
```

## Implementation Plan

### Phase 1: Core Factor Enhancement (Week 1)

**Day 1-2: Volume Integration**
- Implement volume-adjusted momentum calculations
- Add volume-weighted RSI indicator
- Test volume confirmation effects on signal quality

**Day 3-4: Volatility Adjustments**
- Implement volatility-adjusted momentum
- Add multi-timeframe momentum combination
- Test risk-adjusted signal performance

**Day 5: Taiwan Market Adaptations**
- Add technology sector momentum adjustments
- Implement daily limit integration
- Initial factor validation with Taiwan data

### Phase 2: Advanced Indicators & Optimization (Week 2)

**Day 6-7: Advanced Technical Indicators**
- Implement momentum acceleration indicator
- Add breakout strength measurement
- Create factor combination framework

**Day 8-9: Factor Optimization**
- Optimize factor weights and parameters
- Cross-validation with historical Taiwan data
- Information Coefficient analysis and improvement

**Day 10: Integration & Validation**
- Integrate enhanced factors with existing momentum strategy
- Comprehensive factor performance testing
- Final validation against baseline factors

## Deliverables

### Core Factor Calculation Engine

**Enhanced Factor Calculator**
```python
# /src/factors/enhanced_factors.py
class EnhancedFactorCalculator:
    def __init__(self, taiwan_adjustments=True):
        self.taiwan_adjustments = taiwan_adjustments
        self.sector_data = {}  # Technology sector identification

    def calculate_volume_adjusted_momentum(self, prices, volumes, window=20):
        """Volume-confirmed momentum signals"""

    def calculate_volatility_adjusted_momentum(self, prices, window=20):
        """Risk-adjusted momentum signals"""

    def calculate_multi_timeframe_momentum(self, prices):
        """Combined short/medium/long-term momentum"""

    def calculate_enhanced_rsi(self, prices, volumes, window=14):
        """Volume-weighted RSI calculation"""

    def calculate_momentum_acceleration(self, prices, fast=10, slow=30):
        """Momentum acceleration indicator"""

    def calculate_breakout_strength(self, prices, volumes, window=20):
        """Breakout detection with volume confirmation"""

    def apply_taiwan_adjustments(self, factors, stock_metadata):
        """Apply Taiwan market-specific adjustments"""

    def calculate_all_factors(self, price_data, volume_data, metadata):
        """Calculate complete enhanced factor set"""
```

**Factor Validation Framework**
```python
# /src/factors/factor_validator.py
class FactorValidator:
    def __init__(self):
        self.ic_history = {}
        self.performance_metrics = {}

    def calculate_information_coefficient(self, factor_scores, forward_returns):
        """Calculate factor IC for validation"""

    def analyze_factor_performance(self, factors, returns, periods=[5, 10, 20]):
        """Comprehensive factor performance analysis"""

    def compare_vs_baseline(self, enhanced_factors, baseline_factors, returns):
        """Compare enhanced vs baseline factor performance"""

    def generate_factor_report(self, factors, returns):
        """Generate comprehensive factor analysis report"""
```

**Taiwan Market Factor Adjustments**
```python
# /src/factors/taiwan_adjustments.py
class TaiwanFactorAdjustments:
    def __init__(self):
        self.tech_sector_tickers = self.load_tech_sector_stocks()
        self.daily_limit = 0.10  # ±10% daily price limits

    def load_tech_sector_stocks(self):
        """Load Taiwan technology sector stock list"""

    def adjust_for_sector_concentration(self, factors, sector_data):
        """Adjust for Taiwan's tech sector concentration"""

    def adjust_for_daily_limits(self, factors, price_data):
        """Adjust factors for daily price limit effects"""

    def adjust_for_retail_participation(self, factors, volume_patterns):
        """Adjust for high retail investor participation"""
```

### Configuration & Parameters

**Enhanced Factor Configuration**
```yaml
# /config/enhanced_factors_config.yml
volume_factors:
  volume_adjustment_power: 1.0      # Log scaling power for volume
  volume_clip_min: 0.1              # Minimum volume ratio
  volume_clip_max: 5.0              # Maximum volume ratio
  volume_smoothing_window: 5        # Volume smoothing window

volatility_factors:
  vol_adjustment_floor: 0.01        # Minimum volatility for division
  vol_lookback_window: 20           # Volatility calculation window
  vol_adjustment_cap: 3.0           # Maximum volatility adjustment

momentum_timeframes:
  short_term_window: 5              # Short-term momentum (days)
  medium_term_window: 20            # Medium-term momentum (days)
  long_term_window: 60              # Long-term momentum (days)
  short_weight: 0.2                 # Short-term weight
  medium_weight: 0.5                # Medium-term weight
  long_weight: 0.3                  # Long-term weight

taiwan_adjustments:
  tech_sector_adjustment: 0.7       # Tech sector momentum reduction
  non_tech_boost: -0.2              # Non-tech boost when tech weak
  daily_limit_threshold: 0.095      # 9.5% considered near limit
  limit_day_weight: 0.5             # Weight reduction for limit days

factor_weights:
  volume_adjusted_momentum: 0.30    # Enhanced volume momentum
  volatility_adjusted_momentum: 0.25 # Risk-adjusted momentum
  multi_timeframe_momentum: 0.20    # Combined timeframe signal
  enhanced_rsi: 0.15                # Volume-weighted RSI
  momentum_acceleration: 0.10       # Acceleration signal
```

### Testing & Validation Framework

**Factor Performance Tests**
```python
# /tests/factors/test_enhanced_factors.py
class TestEnhancedFactors:
    def test_volume_adjustment_calculation(self):
        """Test volume-adjusted momentum calculation"""

    def test_volatility_adjustment(self):
        """Test volatility-adjusted momentum"""

    def test_taiwan_sector_adjustments(self):
        """Test Taiwan tech sector adjustments"""

    def test_daily_limit_integration(self):
        """Test daily limit adjustment logic"""

    def test_factor_ic_improvement(self):
        """Test IC improvement vs baseline factors"""

# /tests/factors/test_factor_integration.py
class TestFactorIntegration:
    def test_factor_combination(self):
        """Test combination of multiple enhanced factors"""

    def test_historical_performance(self):
        """Test historical factor performance 2014-2024"""

    def test_regime_performance(self):
        """Test factor performance across market regimes"""
```

**Performance Benchmarks**
```python
# Expected factor improvements:
factor_benchmarks = {
    'ic_improvement': 0.20,          # +20% IC vs baseline
    'sharpe_improvement': 0.15,      # +0.15 Sharpe points
    'hit_rate_improvement': 0.05,    # +5% hit rate
    'tail_performance': 0.10         # +10% in extreme periods
}
```

## Success Criteria

### Factor Quality Metrics
- ✅ **Information Coefficient**: 15-25% improvement vs baseline momentum factors
- ✅ **Signal Consistency**: IC >0.03 for enhanced factors (vs 0.02 baseline)
- ✅ **Hit Rate**: >65% directional accuracy (vs 60% baseline)
- ✅ **Risk-Adjusted Performance**: Factor Sharpe ratio >0.5

### Taiwan Market Performance
- ✅ **Sector Adjustment**: Tech sector-adjusted factors show 10%+ IC improvement
- ✅ **Daily Limit Handling**: Performance maintained during high limit day periods
- ✅ **Volume Integration**: Volume-adjusted factors outperform price-only by 5%+
- ✅ **Multi-Timeframe**: Combined timeframe signals beat single timeframe by 8%+

### Integration Success
- ✅ **Strategy Performance**: Enhanced factors contribute 1%+ annual return improvement
- ✅ **Regime Robustness**: Factors perform consistently across bull/bear/crisis regimes
- ✅ **Stability**: Factor scores stable across rebalancing periods (low turnover)
- ✅ **Scalability**: Factor calculations complete within 2 minutes for full universe

## Integration Points

### Upstream Dependencies
- **Market Data**: Price, volume, sector classification data from FinLab
- **Taiwan Market Data**: Technology sector identification, daily limit tracking
- **Historical Performance**: Past factor IC and performance data

### Downstream Integration
- **Task 4**: Multi-regime strategy will use enhanced factors for signal generation
- **Task 5**: Enhanced backtesting will validate factor improvements
- **Task 6**: Historical validation will test enhanced factor performance

### Data Flow Integration
```
Taiwan Market Data (Price + Volume + Metadata)
    ↓
Enhanced Factor Calculation
    ↓
Taiwan-Specific Adjustments (Tech Sector + Daily Limits)
    ↓
Factor Quality Validation (IC + Performance)
    ↓
Integration with Strategy Logic
    ↓
Performance Attribution Analysis
```

## Risk Management

### Factor Risk Assessment
- **Overfitting Risk**: Enhanced factors may be overoptimized on historical Taiwan data
  - *Mitigation*: Out-of-sample validation, parameter stability testing
- **Complexity Risk**: Too many factors may reduce interpretability and stability
  - *Mitigation*: Factor parsimony, clear performance attribution

### Market Risk Considerations
- **Regime Change Risk**: Taiwan market structure changes may reduce factor effectiveness
  - *Mitigation*: Regular factor recalibration, regime-specific testing
- **Sector Concentration Risk**: Tech sector dominance may skew factor performance
  - *Mitigation*: Sector-neutral factor variants, diversification constraints

### Implementation Risks
- **Calculation Errors**: Complex factor calculations may introduce bugs
  - *Mitigation*: Extensive unit testing, factor validation framework
- **Data Quality Risk**: Poor volume/price data affects enhanced factor quality
  - *Mitigation*: Data quality checks, robust calculation methods

## Taiwan Market Context

### Market Microstructure Considerations
- **High Retail Participation**: Retail-driven volume patterns vs institutional
- **Technology Concentration**: 65%+ market cap in technology stocks
- **Daily Price Limits**: ±10% maximum daily moves affect momentum calculations
- **T+2 Settlement**: Settlement timing affects short-term momentum patterns

### Historical Factor Performance Periods
- **2014-2017 Tech Boom**: Momentum factors highly effective, volume confirmation crucial
- **2018-2019 Trade War**: Sector-adjusted factors outperformed during rotation
- **2020 COVID Crisis**: Volatility adjustment critical during extreme periods
- **2021-2022 Recovery**: Multi-timeframe momentum captured regime transitions
- **2023-2024 Normalization**: Combined factors showed resilience

### Regulatory & Cultural Factors
- **Information Flow**: Taiwanese financial media and social platforms affect momentum
- **Policy Sensitivity**: Government tech policy significantly impacts sector momentum
- **Export Dependence**: Global economic data affects Taiwan momentum patterns
- **Currency Effects**: TWD/USD movements influence export-heavy tech stocks

## Future Enhancements

### Advanced Factor Engineering
- **Machine Learning Factors**: ML-based factor combination and selection
- **Alternative Data Integration**: Social sentiment, news sentiment factors
- **Cross-Asset Factors**: Currency, bond yield momentum for Taiwan stocks
- **Earnings Momentum**: Fundamental momentum factors integrated with technical

### Real-Time Enhancements
- **Intraday Factor Updates**: Real-time factor calculation for day trading
- **News-Adjusted Factors**: Immediate adjustment for major news events
- **Options Flow Integration**: Options volume as momentum confirmation
- **Cross-Border Factors**: US/China market momentum spillover effects

### Performance Optimization
- **Factor Decay Analysis**: Monitor and adjust for factor degradation over time
- **Regime-Specific Factors**: Different factor combinations for different regimes
- **Dynamic Factor Weights**: ML-based dynamic weighting of factor components
- **Transaction Cost Integration**: Factor selection considering implementation costs